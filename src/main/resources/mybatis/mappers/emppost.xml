<mapper namespace="com.boot.dao.EmpPostDAO">
    <sql id="criteria">
        <if test='type != null and type == "T"'>
            where emp_title like concat('%', #{keyword}, '%')
        </if>
        <if test='type != null and type == "C"'>
            where emp_content like concat('%', #{keyword}, '%')
        </if>
        <if test='type != null and type == "W"'>
            where emp_workPlace like concat('%', #{keyword}, '%')
        </if>
        <if test='type != null and type == "TC"'>
            where emp_title like concat('%', #{keyword}, '%')
            or emp_content like concat('%', #{keyword}, '%')
        </if>
        <if test='type != null and type == "TW"'>
            where emp_title like concat('%', #{keyword}, '%')
            or emp_workPlace like concat('%', #{keyword}, '%')
        </if>
        <if test='type != null and type == "TCW"'>
            where emp_title like concat('%', #{keyword}, '%')
            or emp_content like concat('%', #{keyword}, '%')
            or emp_workPlace like concat('%', #{keyword}, '%')
        </if>
    </sql>

    <select id="listWithPaging" parameterType="com.boot.dto.Criteria" resultType="com.boot.dto.EmpPostDTO">
        select * from emp_posts
        <include refid="criteria" />
        order by emp_postNo desc
        limit #{pageStart}, #{amount}
    </select>

    <select id="getTotalCount" parameterType="com.boot.dto.Criteria" resultType="int">
        select count(*) from emp_posts
        <include refid="criteria" />
    </select>
</mapper>
